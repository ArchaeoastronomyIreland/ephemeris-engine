<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Archaeo-Ephemeris: Observational</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="app-container">
    <aside class="sidebar">
        <h2>üî≠ Observation Parameters</h2>
        
        <div class="control-group">
            <label>Target Body</label>
            <select id="bodySelect">
                <option value="0">Sun</option>
                <option value="1">Moon</option>
                <option value="2">Mercury</option>
                <option value="3">Venus</option>
                <option value="4" selected>Mars</option>
                <option value="5">Jupiter</option>
                <option value="6">Saturn</option>
            </select>
        </div>
        <div class="control-group">
            <label>Start Date (UT)</label>
            <div class="date-row">
                <input type="number" id="startYear" value="-3500" placeholder="Year">
                <select id="startMonth">
                    <option value="1">Jan</option><option value="2">Feb</option>
                    <option value="3">Mar</option><option value="4">Apr</option>
                    <option value="5">May</option><option value="6">Jun</option>
                    <option value="7">Jul</option><option value="8">Aug</option>
                    <option value="9">Sep</option><option value="10">Oct</option>
                    <option value="11">Nov</option><option value="12">Dec</option>
                </select>
                <input type="number" id="startDay" value="1" min="1" max="31">
            </div>
        </div>

        <hr>

        <div class="control-group">
            <h3>üìç Observer Location</h3>
            <label>Latitude (Decimal)</label>
            <input type="number" id="obsLat" value="53.694" step="0.001"> <label>Longitude (Decimal)</label>
            <input type="number" id="obsLon" value="-6.475" step="0.001">
            
            <label>Elevation (Meters)</label>
            <input type="number" id="obsAlt" value="51" step="1">
        </div>

        <hr>

        <div class="control-group">
            <h3>üå´ Atmosphere (Refraction)</h3>
            <div class="step-row">
                <div>
                    <label>Temp (¬∞C)</label>
                    <input type="number" id="atTemp" value="10">
                </div>
                <div>
                    <label>Press (mbar)</label>
                    <input type="number" id="atPress" value="1013.25">
                </div>
            </div>
        </div>

        <hr>

        <div class="control-group">
            <label>Duration / Steps</label>
            <div class="step-row">
                <input type="number" id="stepCount" value="10">
                <select id="stepUnit">
                    <option value="1">Days</option>
                    <option value="0.041666">Hours</option>
                    <option value="365.25">Years</option>
                </select>
            </div>
        </div>
        
        <div class="control-group">
            <button id="calcBtn" onclick="runQuery()">Calculate Alignment</button>
            <button id="dlBtn" onclick="downloadCSV()" disabled class="secondary-btn">Download CSV</button>
        </div>
        <div id="status" class="status-box">System Idle.</div>
    </aside>

    <main class="results-area">
        <header>
            <h1>Topocentric Horizon Output</h1>
            <p>Azimuth (Bearing) & Altitude (True vs Apparent)</p>
        </header>
        <div class="table-wrapper">
            <table id="resultsTable">
                <thead>
                    <tr>
                        <th>Date (UT)</th>
                        <th>Azimuth (¬∞)</th>
                        <th>True Alt (¬∞)</th>
                        <th>Apparent Alt (¬∞)</th>
                        <th>Distance (AU)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td colspan="5" style="text-align:center; color:#666;">Ready to calculate.</td></tr>
                </tbody>
            </table>
        </div>
    </main>
</div>

<script type="module">
    import { runQuery, downloadCSV } from './js/app.js?v=CLEVER_TOPO';
    window.runQuery = runQuery;
    window.downloadCSV = downloadCSV;
</script>

</body>
</html>