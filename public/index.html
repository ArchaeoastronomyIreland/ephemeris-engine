<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Archaeo-Ephemeris Generator</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="app-container">
    <aside class="sidebar">
        <h2>ðŸ”­ Query Parameters</h2>
        
        <div class="control-group">
            <label>Target Body</label>
            <select id="bodySelect">
                <option value="0">Sun</option>
                <option value="1">Moon</option>
                <option value="2">Mercury</option>
                <option value="3">Venus</option>
                <option value="4" selected>Mars</option>
                <option value="5">Jupiter</option>
                <option value="6">Saturn</option>
            </select>
        </div>

        <div class="control-group">
            <label>Start Date (UT)</label>
            <div class="date-row">
                <input type="number" id="startYear" value="-3500" placeholder="Year">
                <select id="startMonth">
                    <option value="1">Jan</option><option value="2">Feb</option>
                    <option value="3">Mar</option><option value="4">Apr</option>
                    <option value="5">May</option><option value="6">Jun</option>
                    <option value="7">Jul</option><option value="8">Aug</option>
                    <option value="9">Sep</option><option value="10">Oct</option>
                    <option value="11">Nov</option><option value="12">Dec</option>
                </select>
                <input type="number" id="startDay" value="1" min="1" max="31">
            </div>
        </div>

        <div class="control-group">
            <label>Steps</label>
            <div class="step-row">
                <input type="number" id="stepCount" value="10">
                <select id="stepUnit">
                    <option value="1">Days</option>
                    <option value="30">Months (~30d)</option>
                    <option value="365.25">Years</option>
                </select>
            </div>
        </div>

        <div class="control-group">
            <button id="calcBtn" onclick="runQuery()">Generate Ephemeris</button>
            <button id="dlBtn" onclick="downloadCSV()" disabled class="secondary-btn">Download CSV</button>
        </div>

        <div id="status" class="status-box">Initializing Engine...</div>
    </aside>

    <main class="results-area">
        <header>
            <h1>Ephemeris Output (Geocentric / Equatorial J2000)</h1>
        </header>
        <div class="table-wrapper">
            <table id="resultsTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Julian Day</th>
                        <th>R.A.</th>
                        <th>Dec.</th>
                        <th>Dist (AU)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td colspan="5" style="text-align:center; color:#666;">No data generated yet.</td></tr>
                </tbody>
            </table>
        </div>
    </main>
</div>

<script type="module">
    // This v=2024 is critical. It forces the browser to re-download app.js
    import { runQuery, downloadCSV } from './js/app.js?v=2024';
    
    // Attach to window so HTML buttons work
    window.runQuery = runQuery;
    window.downloadCSV = downloadCSV;
</script>

</body>
</html>